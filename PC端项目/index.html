<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <!--使用最高级标准模式渲染页面, 用于IE浏览器-->
    <meta http-equiv="X-UA-Compatible" content="IE=Edge">
    <!--采用webkit内核渲染， 用于国产双内核浏览器-->
    <meta name="renderer" content="webkit">
    <title>尚硅谷</title>
    <!--导入css-->
    <link rel="stylesheet" href="css/index.css">
</head>

<body>
    <div class="container">
        <header id='header'>
            <div class="header-container">
                <h1 class="logo left">
                    <img src="./img/logo.png" alt="">
                </h1>
                <div class="bg-music">
                    <audio src="./img/Lil' Eddie - Statue.mp3"></audio>
                </div>
                <nav class="header-nav right">
                    <ul>
                        <li>
                            <a href="javascript:">
                                <div class="nav-item-actived"><img src="img/home_actived.png" alt="home_actived"></div>
                                <div class="nav-item-default"><img src="img/home.png" alt="home"></div>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:">
                                <div class="nav-item-actived">课程</div>
                                <div class="nav-item-default">课程</div>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:">
                                <div class="nav-item-actived">工作</div>
                                <div class="nav-item-default">工作</div>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:">
                                <div class="nav-item-actived">关于</div>
                                <div class="nav-item-default">关于</div>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:">
                                <div class="nav-item-actived">团队</div>
                                <div class="nav-item-default">团队</div>
                            </a>
                        </li>
                    </ul>
                </nav>
                <div class="arrow"></div>
            </div>
        </header>
        <div id="main">
            <div class="page-list">
                <!--第一屏-->
                <div class="page-item home">
                    <div class="page-content">
                        <div class="play">
                            <ul class="play-list">
                                <li class="play-item actived">One Layer</li>
                                <li class="play-item">Two Layer</li>
                                <li class="play-item">Three Layer</li>
                                <li class="play-item">Four Layer</li>
                            </ul>
                            <ul class="icon-list">
                                <li class="icon-item actived"></li>
                                <li class="icon-item"></li>
                                <li class="icon-item"></li>
                                <li class="icon-item"></li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!--第二屏-->
                <div class="page-item course">
                    <div class="page-content">
                        <div class="course01">
                            <h3 class="common-title">EINIGE</h3>
                            <h3 class="common-title">UNSERER</h3>
                            <h3 class="common-title">KUNDEN</h3>
                        </div>
                        <div class="course02">
                            <p class="common-text">Das Kundenvertrauen in unsere Kompetenz ist die notwendige Basis
                                einer erfolgreichen Zusammenarbeit, gleichzeitig aber auch das größte Lob, das man uns
                                entgegenbringen kann.</p>
                            <p class="common-text">Diese und viele weitere große und kleine Kunden vertrauen uns seit
                                Jahren, was uns stolz macht, und dafür sagen wir an dieser Stelle einfach mal.</p>
                        </div>
                        <div class="course03">
                            <div class="course-plus"></div>
                            <div class="course-plus"></div>
                            <div class="course-plus"></div>
                            <div class="course-plus"></div>
                            <div class="course-plus"></div>
                            <ul class="course-list">
                                <li class="course-item">
                                    <div class="course-item-inner">
                                        <div class="course-item-front">
                                            <img src="./img/html5.png" alt="">
                                        </div>
                                        <div class="course-item-back">
                                            HTML5
                                        </div>
                                    </div>
                                </li>
                                <li class="course-item">
                                    <div class="course-item-inner">
                                        <div class="course-item-front">
                                            <img src="./img/java.png" alt="">
                                        </div>
                                        <div class="course-item-back">
                                            HTML5
                                        </div>
                                    </div>
                                </li>
                                <li class="course-item">
                                    <div class="course-item-inner">
                                        <div class="course-item-front">
                                            <img src="./img/python.png" alt="">
                                        </div>
                                        <div class="course-item-back">
                                            Python
                                        </div>
                                    </div>
                                </li>
                                <li class="course-item">
                                    <div class="course-item-inner">
                                        <div class="course-item-front">
                                            <img src="./img/php.png" alt="">
                                        </div>
                                        <div class="course-item-back">
                                            PHP
                                        </div>
                                    </div>
                                </li>
                                <li class="course-item">
                                    <div class="course-item-inner">
                                        <div class="course-item-front">
                                            <img src="./img/ios.png" alt="">
                                        </div>
                                        <div class="course-item-back">
                                            IOS
                                        </div>
                                    </div>
                                </li>
                                <li class="course-item">
                                    <div class="course-item-inner">
                                        <div class="course-item-front">
                                            <img src="./img/android.png" alt="">
                                        </div>
                                        <div class="course-item-back">
                                            Android
                                        </div>
                                    </div>
                                </li>
                                <li class="course-item">
                                    <div class="course-item-inner">
                                        <div class="course-item-front">
                                            <img src="./img/hadoop.png" alt="">
                                        </div>
                                        <div class="course-item-back">
                                            大数据
                                        </div>
                                    </div>
                                </li>
                                <li class="course-item">
                                    <div class="course-item-inner">
                                        <div class="course-item-front">
                                            <img src="./img/linux.png" alt="">
                                        </div>
                                        <div class="course-item-back">
                                            Linux
                                        </div>
                                    </div>
                                </li>
                                <li class="course-item">
                                    <div class="course-item-inner">
                                        <div class="course-item-front">
                                            <img src="./img/database.png" alt="">
                                        </div>
                                        <div class="course-item-back">
                                            数据库
                                        </div>
                                    </div>
                                </li>
                                <li class="course-item">
                                    <div class="course-item-inner">
                                        <div class="course-item-front">
                                            <img src="./img/operate.png" alt="">
                                        </div>
                                        <div class="course-item-back">
                                            运营
                                        </div>
                                    </div>
                                </li>

                                <li class="course-item">
                                    <div class="course-item-inner">
                                        <div class="course-item-front">
                                            <img src="./img/ui.png" alt="">
                                        </div>
                                        <div class="course-item-back">
                                            UI
                                        </div>
                                    </div>
                                </li>
                                <li class="course-item">
                                    <div class="course-item-inner">
                                        <div class="course-item-front">
                                            <img src="./img/product.png" alt="">
                                        </div>
                                        <div class="course-item-back">
                                            产品
                                        </div>
                                    </div>
                                </li>
                            </ul>
                        </div>
                        <div class="plane1"></div>
                        <div class="plane2"></div>
                        <div class="plane3"></div>
                    </div>
                </div>

                <!--第三屏-->
                <div class="page-item works">
                    <div class="page-content">
                        <div class="works01">
                            <h3 class="common-title">EINBLICK</h3>
                            <h3 class="common-title">ERKENNTNIS</h3>
                            <h3 class="common-title">ERGEBNIS</h3>
                        </div>
                        <div class="works02">
                            <ul>
                                <li class="works-list">
                                    <img src="./img/worksimg1.jpg" alt="">
                                    <div class="works-item-mask">
                                        <p>一江春水向东流</p>
                                        <span class="mask-icon"></span>
                                    </div>
                                </li>
                                <li class="works-list">
                                    <img src="./img/worksimg2.jpg" alt="">
                                    <div class="works-item-mask">
                                        <p>一江春水向东流</p>
                                        <span class="mask-icon"></span>
                                    </div>
                                </li>
                                <li class="works-list">
                                    <img src="./img/worksimg3.jpg" alt="">
                                    <div class="works-item-mask">
                                        <p>一江春水向东流</p>
                                        <span class="mask-icon"></span>
                                    </div>
                                </li>
                                <li class="works-list">
                                    <img src="./img/worksimg4.jpg" alt="">
                                    <div class="works-item-mask">
                                        <p>一江春水向东流</p>
                                        <span class="mask-icon"></span>
                                    </div>
                                </li>
                            </ul>
                        </div>
                        <div class="works03">
                            <div class="robot"></div>
                        </div>
                    </div>
                </div>

                <!--第四屏-->
                <div class="page-item about">
                    <div class="page-content">
                        <div class="about01">
                            <h3 class="common-title">EINBLICK</h3>
                            <h3 class="common-title">ERKENNTNIS</h3>
                            <h3 class="common-title">ERGEBNIS</h3>
                        </div>
                        <div class="about02">
                            <p class="common-text">Der bunte Medienmix ist die Faszination die uns antreibt und das, was
                                man an uns schätzt. Von A bis Z und von vorne bis hinten nehmen wir Ihr Projekt unter
                                unsere Fittiche und lassen es zu etwas Großartigem heranwachsen.</p>
                        </div>
                        <div class="about03">
                            <div class="about-item">
                                <img src="img/about2.jpg" alt="about">
                                <ul class="about-item-mask">
                                    <li><img src="img/about1.jpg" alt="about1"></li>
                                    <li><img src="img/about1.jpg" alt="about1"></li>
                                    <li><img src="img/about1.jpg" alt="about1"></li>
                                    <li><img src="img/about1.jpg" alt="about1"></li>
                                </ul>
                            </div>
                            <div class="about-item">
                                <img src="img/about4.jpg" alt="about">
                                <ul class="about-item-mask">
                                    <li><img src="img/about3.jpg" alt="about3"></li>
                                    <li><img src="img/about3.jpg" alt="about3"></li>
                                    <li><img src="img/about3.jpg" alt="about3"></li>
                                    <li><img src="img/about3.jpg" alt="about3"></li>
                                </ul>
                            </div>
                        </div>

                    </div>
                    <div class="about-line"></div>
                </div>

                <!--第五屏-->
                <div class="page-item team">
                    <div class="page-content">
                        <div class="team01">
                            <h3 class="common-title">WIR SIND</h3>
                            <h3 class="common-title">VOXELAIR</h3>
                        </div>
                        <div class="team02">
                            <p class="common-text">Wir sind seit 2002 eine Full-Service-Werbeagentur mit Stammsitz in
                                Heimsheim, zwischen Stuttgart und Karlsruhe.</p>
                            <p class="common-text">Über 60 Jahre Erfahrung vereinen das gesamte VoxelAir-Team. Dabei hat
                                jedes Voxel neben professionellem Allroundwissen auch sein ganz spezielles Gebiet, um
                                selbst die individuellsten Kundenwünsche schnell und kompetent umzusetzen.</p>
                        </div>
                        <div class="team03">
                            <ul class="team-list">
                                <li class="team-item"></li>
                                <li class="team-item"></li>
                                <li class="team-item"></li>
                                <li class="team-item"></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!--侧边导航-->
        <nav id="slideNav">
            <ul class="slide-list">
                <li class="slide-item"></li>
                <li class="slide-item"></li>
                <li class="slide-item"></li>
                <li class="slide-item"></li>
                <li class="slide-item"></li>
            </ul>
        </nav>
    </div>
</body>
<script>
    //头部交互
    (function () {
        var navItems = document.querySelectorAll('.header-nav li'); //所有导航的集合
        var arrow = document.querySelector('#header .arrow');  //小箭头
        var main = document.querySelector('#main');  //主体结构元素
        var header = document.querySelector('#header'); //头部
        var pageList = main.querySelector('.page-list');
        var pageItems = main.querySelectorAll('.page-item');  //所有屏幕的集合
        var slideItems = document.querySelectorAll('#slideNav .slide-item'); //侧边导航
        var currentIndex = 0;
        var prevIndex=0

        //计算主体页面的高度和每一个屏幕的高度
        var pageHeight = window.innerHeight - header.offsetHeight;

        var animationData = [
            // 第二屏
            {
                //入场动画
                    inAnimation: function () {
                        //获取元素
                        var plane1 = document.querySelector('.course .plane1');
                        var plane2 = document.querySelector('.course .plane2');
                        var plane3 = document.querySelector('.course .plane3');
                        //定义进场时的位置
                        plane1.style.transform = 'translate(0,0)';
                        plane2.style.transform = 'translate(0,0)';
                        plane3.style.transform = 'translate(0,0)';
                    },
                    //离场动画
                    outAnimation: function () {
                        //获取元素
                        var plane1 = document.querySelector('.course .plane1');
                        var plane2 = document.querySelector('.course .plane2');
                        var plane3 = document.querySelector('.course .plane3');
                        //定义离场位置
                        plane1.style.transform = 'translate(-200px,-200px)';
                        plane2.style.transform = 'translate(-200px,200px)';
                        plane3.style.transform = 'translate(200px,-200px)';
                    }
            }
        ];


        animationData.forEach(function(item){
            item.outAnimation();
        });
            

        // 设置主体高度
        setPageHeight();
        // 初始化
        navList(currentIndex);
        // 给导航添加点击事件
        navItems.forEach(function (item, index) {
            item.addEventListener('click', function () {
                currentIndex = index; //设置索引标记
                navList()
            })
        });
        //侧边导航点击事件
        slideItems.forEach(function (slideItem, index) {
            slideItem.addEventListener('click', function () {
                currentIndex = index
                navList()
            })

        })

        // 视口大小发生改变， 重新计算每一屏的高度
        window.addEventListener('resize', function () {
            //重新计算高度
            pageHeight = window.innerHeight - header.offsetHeight;
            //重新设置 main的高度和每一个屏的高度
            setPageHeight();
            //重新设置导航
            navList(currentIndex);
        });

        // 绑定滚轮事件
        //chrome ie
        document.addEventListener('mousewheel', scrollMove);
        //firefox
        document.addEventListener('DOMMouseScroll', scrollMove);

        /*
        * 实现滚轮滚动触发的函数
        * 事件防抖
        * */
        var timeId = null;
        function scrollMove(event) {
            //如果上次定时没有结束，清除
            clearTimeout(timeId);
            //延迟执行
            timeId = setTimeout(function () {
                //判断是往上滚动还是往下滚动
                var tag = null;  //标记滚轮往上滚还是往下滚
                if (event.wheelDelta) {  //chrome ie
                    if (event.wheelDelta > 0) {
                        tag = 'up';
                    } else {
                        tag = 'down';
                    }
                } else if (event.detail) { //firefox
                    if (event.detail > 0) {
                        tag = 'down';
                    } else {
                        tag = 'up';
                    }
                }
                //根据滚动方向，实现相应的操作
                if (tag === 'up') {
                    //索引-1
                    currentIndex--;
                    //判断索引范围
                    if (currentIndex < 0) {
                        currentIndex = 0;
                    }
                    //设置导航和页面
                    navList();
                } else if (tag === 'down') {
                    //索引+1
                    currentIndex++;
                    //索引范围判断
                    if (currentIndex > pageItems.length - 1) {
                        currentIndex = pageItems.length - 1;
                    }
                    //设置导航和页面
                    navList();
                }
            }, 300);

        }

        /**
         * 设置main和每一个屏的高度
         */
        function setPageHeight() {
            main.style.height = pageHeight + 'px';
            pageItems.forEach(function (pageItem) {
                pageItem.style.height = pageHeight + 'px';
            });
        }

        function navList() {
            //其他所有的导航失去高亮
            navItems.forEach(function (item, index) {
                item.classList.remove('actived')
                //侧边导航
                slideItems[index].classList.remove('actived')
            })
            //当前点击的导航显示高亮
            navItems[currentIndex].classList.add('actived');

            // 侧边导航点击显示高亮
            slideItems[currentIndex].classList.add('actived')

            // 设置三角形的位置 
            arrow.style.left = navItems[currentIndex].getBoundingClientRect().left + (navItems[currentIndex].offsetWidth / 2 - arrow.offsetWidth / 2) + 'px'
            pageList.style.top = -currentIndex * pageHeight + 'px';
           
              //上一个页面离场动画
            animationData[prevIndex].outAnimation();
                // 设置当前页面进场动画
            animationData[currentIndex].inAnimation();
             //重新设置上一个的索引
             prevIndex = currentIndex;
        }

    })();
    //主体交互
    (function () {
        var playItems = document.querySelectorAll('.play-item')
        var iconItems = document.querySelectorAll('.icon-item')
        var play = document.querySelector('.play');
        var currentIndex = 0; //全局的索引
        var prevIndex = 0; // 标识上一个的索引
        var isAnimated = false //标识动画是否在执行
        iconItems.forEach(function (iconItem, index) {
            iconItem.addEventListener('click', function () {
                // 进来判断动画是否在执行
                if (isAnimated) {
                    return
                }
                currentIndex = index; //修改全局索引
                setPlay()

            })
        });
        // 设置自动播放
        var intervalId = setInterval(runPlay, 3000)

        function runPlay() {
            //索引自增
            currentIndex++;
            if (currentIndex > playItems.length - 1) {
                currentIndex = 0
            }
            setPlay(true)

        }
        //鼠标悬停在元素上
        play.addEventListener('mouseenter', function () {
            clearInterval(intervalId)
        })
        //鼠标离开以后
        play.addEventListener('mouseleave', function () {
            intervalId = setInterval(runPlay, 3000)
        })
        function setPlay(isRightShow) {

            //设置执行动画
            isAnimated = true
            // 动画执行完毕，状态发生改变
            setTimeout(function () {
                isAnimated = false
            }, 2000)

            //比较当前的索引和上一个索引
            if (currentIndex > prevIndex || isRightShow) {
                // 右边显示，左边隐藏
                playItems[currentIndex].className = 'play-item right-show';
                playItems[prevIndex].className = 'play-item left-hide';
                //把上一个索引修改
                prevIndex = currentIndex

            } else if (currentIndex < prevIndex) {
                // 右边隐藏，左边显示
                playItems[currentIndex].className = 'play-item left-show';
                playItems[prevIndex].className = 'play-item right-hide';
                //把上一个索引修改
                prevIndex = currentIndex
            }
            // 小图标切换
            iconItems.forEach(function (iconitem, index) {
                iconitem.classList.remove('actived')

            })
            iconItems[currentIndex].classList.add('actived')
        }

    })();

    (function () {
        var bgMusic = document.querySelector('.bg-music')
        var audio = document.querySelector('audio')
        bgMusic.addEventListener('click', function () {
            if (audio.paused) { //暂停
                //播放
                audio.play();
                bgMusic.classList.add('played')
            } else {
                //暂停
                audio.pause();
                bgMusic.classList.remove('played')
            }
        })







    })()

</script>

</html>